<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dashboard Commercial - 25/07/2025 12:09:54</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		
		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			background: #f7f7f7;
			padding: 20px;
		}
		
		.dashboard {
			max-width: 1400px;
			margin: 0 auto;
		}
		
		.header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 30px;
		}
		
		h1 {
			color: #1a1a1a;
			font-size: 28px;
		}
		
		.last-update {
			color: #666;
			font-size: 14px;
		}
		
		.kpi-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
			gap: 20px;
			margin-bottom: 40px;
		}
		
		.kpi-card {
			background: white;
			border-radius: 12px;
			padding: 24px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			transition: transform 0.2s;
		}
		
		.kpi-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0,0,0,0.15);
		}
		
		.kpi-value {
			font-size: 36px;
			font-weight: bold;
			margin: 10px 0;
		}
		
		.kpi-label {
			color: #666;
			font-size: 14px;
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}
		
		.kpi-sublabel {
			color: #999;
			font-size: 12px;
			margin-top: 5px;
		}
		
		.positive { color: #10b981; }
		.negative { color: #ef4444; }
		.neutral { color: #3b82f6; }
		.warning { color: #f59e0b; }
		
		.chart-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
			gap: 30px;
			margin-bottom: 40px;
		}
		
		.chart-container {
			background: white;
			border-radius: 12px;
			padding: 24px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		
		.chart-title {
			font-size: 18px;
			font-weight: 600;
			margin-bottom: 20px;
			color: #1a1a1a;
		}
		
		canvas {
			max-height: 300px;
		}
		
		.progress-bar {
			width: 100%;
			height: 8px;
			background: #e5e5e5;
			border-radius: 4px;
			overflow: hidden;
			margin-top: 12px;
		}
		
		.progress-fill {
			height: 100%;
			background: linear-gradient(90deg, #3b82f6 0%, #10b981 100%);
			border-radius: 4px;
			transition: width 0.5s ease;
		}
		
		.data-table {
			background: white;
			border-radius: 12px;
			padding: 24px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			overflow-x: auto;
		}
		
		table {
			width: 100%;
			border-collapse: collapse;
		}
		
		th, td {
			text-align: left;
			padding: 12px;
			border-bottom: 1px solid #e5e5e5;
		}
		
		th {
			font-weight: 600;
			color: #666;
			font-size: 14px;
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}
		
		.no-data {
			text-align: center;
			color: #999;
			padding: 40px;
			font-style: italic;
		}
		
		.warning-box {
			background: #fef3c7;
			border: 1px solid #f59e0b;
			padding: 12px;
			border-radius: 8px;
			margin-bottom: 20px;
		}
		
		.warning-box p {
			color: #92400e;
			margin: 0;
		}
		
		.simple-stats {
			padding: 20px;
		}
		
		.stat-item {
			margin-bottom: 15px;
			padding: 15px;
			background: #f3f4f6;
			border-radius: 8px;
		}
		
		.stat-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		
		.stat-detail {
			margin-top: 8px;
			font-size: 14px;
			color: #666;
		}
	</style>
</head>
<body>
	<div class="dashboard">
		<div class="header">
			<h1>üìä Dashboard Commercial</h1>
			<div class="last-update">Derni√®re mise √† jour: 25/07/2025 12:09:54</div>
		</div>
		
		<!-- KPIs Principaux -->
		<div class="kpi-grid">
			<div class="kpi-card">
				<div class="kpi-label">Taux de R√©ussite</div>
				<div class="kpi-value warning">34%</div>
				<div class="progress-bar">
					<div class="progress-fill" style="width: 34%"></div>
				</div>
			</div>
			
			<div class="kpi-card">
				<div class="kpi-label">Nombre d'Appels Moyen</div>
				<div class="kpi-value neutral">3.7</div>
				<div class="kpi-sublabel">Par prospect contact√©</div>
			</div>
			
			<div class="kpi-card">
				<div class="kpi-label">Tarif Moyen</div>
				<div class="kpi-value neutral">796‚Ç¨</div>
				<div class="kpi-sublabel">HT par contrat sign√©</div>
			</div>
			
			<div class="kpi-card">
				<div class="kpi-label">Total Prospects</div>
				<div class="kpi-value">267</div>
				<div class="kpi-sublabel">Dans la base</div>
			</div>
			
			<div class="kpi-card">
				<div class="kpi-label">Taux "Prix trop cher"</div>
				<div class="kpi-value positive">5%</div>
				<div class="kpi-sublabel">Des refus</div>
			</div>
			
			<div class="kpi-card">
				<div class="kpi-label">Sans R√©ponse</div>
				<div class="kpi-value warning">11%</div>
				<div class="kpi-sublabel">Des prospects</div>
			</div>
		</div>
		
		<!-- Graphiques -->
		<div class="chart-grid">
			<div class="chart-container">
				<h3 class="chart-title">üìà R√©partition des Statuts</h3>
				<canvas id="statusChart"></canvas>
			</div>
			
			<div class="chart-container">
				<h3 class="chart-title">üìç Performance par Lieu</h3>
				<canvas id="venueChart"></canvas>
			</div>
			
			<div class="chart-container">
				<h3 class="chart-title">üìÖ √âvolution Mensuelle</h3>
				<canvas id="monthlyChart"></canvas>
			</div>
			
			<div class="chart-container">
				<h3 class="chart-title">üéØ Canaux d'Acquisition</h3>
				<div class="warning-box">
						<p>‚ö†Ô∏è 91% des prospects n'ont pas de canal renseign√©</p>
					</div>
				<div class="simple-stats">
							
									<div class="stat-item">
										<div class="stat-header">
											<strong>Non renseign√©</strong>
											<span style="color: #10b981;">89 conversions</span>
										</div>
										<div class="stat-detail">
											Taux: 36% (89/244)
										</div>
									</div>
								
									<div class="stat-item">
										<div class="stat-header">
											<strong>Google</strong>
											<span style="color: #10b981;">1 conversion</span>
										</div>
										<div class="stat-detail">
											Taux: 50% (1/2)
										</div>
									</div>
								
									<div class="stat-item">
										<div class="stat-header">
											<strong>Site Web</strong>
											<span style="color: #10b981;">1 conversion</span>
										</div>
										<div class="stat-detail">
											Taux: 33% (1/3)
										</div>
									</div>
								
						</div>
			</div>
		</div>
		
		<!-- Tableau des raisons de refus -->
		
		<div class="data-table">
			<h3 class="chart-title">üìã Analyse des Refus</h3>
			<table>
				<thead>
					<tr>
						<th>Raison</th>
						<th>Nombre</th>
						<th>Pourcentage</th>
					</tr>
				</thead>
				<tbody>
					
							<tr>
								<td>Non sp√©cifi√©</td>
								<td>80</td>
								<td>82%</td>
							</tr>
						
							<tr>
								<td>Autre lieu</td>
								<td>7</td>
								<td>7%</td>
							</tr>
						
							<tr>
								<td>Trop Cher</td>
								<td>5</td>
								<td>5%</td>
							</tr>
						
							<tr>
								<td>Annul√©</td>
								<td>3</td>
								<td>3%</td>
							</tr>
						
							<tr>
								<td>Trop Loin</td>
								<td>2</td>
								<td>2%</td>
							</tr>
						
							<tr>
								<td>Erreur</td>
								<td>1</td>
								<td>1%</td>
							</tr>
						
				</tbody>
			</table>
		</div>
		
	</div>
	
	<script>
		// Configuration des graphiques
		Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
		
		// Donn√©es pour les graphiques
		const kpis = {"total":267,"successRate":34,"failureRate":37,"noResponseRate":11,"avgCalls":"3.7","avgPrice":796,"venueStats":{"Rooftop":{"total":199,"success":89},"Tama":{"total":70,"success":2}},"topChannels":[["Non renseign√©",89]],"channelStats":{"ABC Salles":{"conversions":0,"total":9,"rate":0},"1001 Salles":{"conversions":0,"total":6,"rate":0},"Non renseign√©":{"conversions":89,"total":244,"rate":36},"Google":{"conversions":1,"total":2,"rate":50},"Le bon coin":{"conversions":0,"total":3,"rate":0},"Site Web":{"conversions":1,"total":3,"rate":33}},"topChannelsByRate":[["Non renseign√©",{"conversions":89,"total":244,"rate":36}]],"missingChannelRate":91,"monthlyData":{"f√©v":0,"mar":8,"avr":43,"mai":53,"juin":37,"juil":24},"refusalReasons":{"Autre lieu":7,"Non sp√©cifi√©":80,"Trop Loin":2,"Trop Cher":5,"Annul√©":3,"Erreur":1},"tooExpensiveRate":5,"lastUpdate":"25/07/2025 12:09:54"};
		
		// Graphique des statuts
		new Chart(document.getElementById('statusChart'), {
			type: 'doughnut',
			data: {
				labels: ['Succ√®s', '√âchecs', 'Sans r√©ponse', 'En cours'],
				datasets: [{
					data: [
						kpis.successRate, 
						kpis.failureRate, 
						kpis.noResponseRate, 
						100 - kpis.successRate - kpis.failureRate - kpis.noResponseRate
					],
					backgroundColor: ['#10b981', '#ef4444', '#f59e0b', '#3b82f6'],
					borderWidth: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				plugins: {
					legend: {
						position: 'bottom',
						padding: 20
					},
					tooltip: {
						callbacks: {
							label: function(context) {
								return context.label + ': ' + context.parsed + '%';
							}
						}
					}
				}
			}
		});
		
		// Graphique par lieu
		new Chart(document.getElementById('venueChart'), {
			type: 'bar',
			data: {
				labels: Object.keys(kpis.venueStats),
				datasets: [
					{
						label: 'Total demandes',
						data: Object.values(kpis.venueStats).map(v => v.total),
						backgroundColor: '#3b82f6'
					},
					{
						label: 'Contrats sign√©s',
						data: Object.values(kpis.venueStats).map(v => v.success),
						backgroundColor: '#10b981'
					}
				]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				scales: {
					y: {
						beginAtZero: true,
						ticks: {
							precision: 0
						}
					}
				}
			}
		});
		
		// Graphique mensuel
		new Chart(document.getElementById('monthlyChart'), {
			type: 'line',
			data: {
				labels: Object.keys(kpis.monthlyData),
				datasets: [{
					label: 'Nombre de demandes',
					data: Object.values(kpis.monthlyData),
					borderColor: '#3b82f6',
					backgroundColor: 'rgba(59, 130, 246, 0.1)',
					tension: 0.4
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				scales: {
					y: {
						beginAtZero: true,
						ticks: {
							precision: 0
						}
					}
				}
			}
		});
		
		// Graphique des canaux (version am√©lior√©e)
		if (kpis.topChannels.length > 2) {
			const ctx = document.getElementById('channelChart');
			const channelData = kpis.topChannels.map(c => c[1]);
			const channelLabels = kpis.topChannels.map(c => {
				const stats = kpis.channelStats[c[0]];
				return stats ? c[0] + ' (' + stats.rate + '%)' : c[0];
			});
			
			new Chart(ctx, {
				type: 'horizontalBar',
				data: {
					labels: channelLabels,
					datasets: [{
						label: 'Conversions',
						data: channelData,
						backgroundColor: ['#10b981', '#3b82f6', '#8b5cf6', '#f59e0b', '#ef4444']
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					indexAxis: 'y',
					scales: {
						x: {
							beginAtZero: true,
							ticks: {
								precision: 0
							}
						}
					},
					plugins: {
						tooltip: {
							callbacks: {
								afterLabel: function(context) {
									const channel = kpis.topChannels[context.dataIndex][0];
									const stats = kpis.channelStats[channel];
									if (stats) {
										return 'Taux de conversion: ' + stats.rate + '%\nTotal prospects: ' + stats.total;
									}
									return '';
								}
							}
						}
					}
				}
			});
		}
	</script>
</body>
</html>